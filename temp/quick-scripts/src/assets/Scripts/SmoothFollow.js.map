{"version":3,"sources":["assets\\Scripts\\SmoothFollow.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,yCAAoC;AAE9B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAY;IAAlD;QAAA,qEAoCC;QAjCG,YAAM,GAAY,IAAI,CAAC;QAGvB,YAAM,GAAY,IAAI,CAAC;QAGvB,YAAM,GAAY,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;;IA2BnC,CAAC;IAzBG,wBAAwB;IAExB,eAAe;IAEf,wBAAK,GAAL;IAEA,CAAC;IAED,iBAAiB;IAEjB,6BAAU,GAAV,UAAW,EAAE;QAET,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAE,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;QAEnE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAE9B,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,EAAE,CAAC;QAE3E,IAAI,cAAc,GAAI,EAAE,CAAC,IAAI,EAAE,CAAC;QAChC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,EAAG,SAAS,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QAExG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAS,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAC,cAAc,EAAC,EAAE,GAAC,EAAE,CAAC,CAAC,CAAA;IAG5G,CAAC;IAhCD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACa;IATd,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAoC5B;IAAD,eAAC;CApCD,AAoCC,CApCqC,EAAE,CAAC,SAAS,GAoCjD;kBApCoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport Attractor from \"./Attractor\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    target: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    planet: cc.Node = null;\r\n\r\n    @property(cc.Vec3)\r\n    offset: cc.Vec3 = cc.Vec3.ZERO;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    lateUpdate(dt){\r\n\r\n        let newPos = this.target.position.add( this.target.up.mulSelf(16));\r\n\r\n        this.node.setPosition(newPos);\r\n\r\n        let gravityUp = this.target.position.sub(this.planet.position).normalize();\r\n\r\n        let targetRotation =  cc.quat();\r\n        cc.Quat.rotationTo(targetRotation, this.node.up , gravityUp).multiply(this.node.getRotation(cc.quat()));\r\n\r\n        this.node.setRotation(Attractor.slerp(cc.quat(), this.node.getRotation(cc.quat()),targetRotation,50*dt))\r\n\r\n\r\n    }\r\n}\r\n"]}