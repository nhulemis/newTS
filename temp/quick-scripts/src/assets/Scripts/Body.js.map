{"version":3,"sources":["assets\\Scripts\\Body.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,yCAAoC;AAE9B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAkC,wBAAY;IAA9C;QAAA,qEAuDC;QAtDG,eAAS,GAAc,IAAI,CAAC;QAC5B,wBAAwB;QAExB,oBAAc,GAAY,KAAK,CAAC;QAGhC,WAAK,GAAU,EAAE,CAAC;;IAgDtB,CAAC;IA9CG,qBAAM,GAAN;IAEA,CAAC;IAED,oBAAK,GAAL;QACI,IAAI,CAAC,SAAS,GAAG,mBAAS,CAAC,SAAS,CAAC;QACrC,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;QAChD,QAAQ,CAAC,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;QAC5D,QAAQ,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAC1D,QAAQ,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;IAE9D,CAAC;IACD,8BAAe,GAAf,UAAgB,KAAK;QACjB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED,8BAAe,GAAf,UAAgB,KAAK;QACjB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,+BAAgB,GAAhB,UAAiB,KAAK;QAClB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED,qBAAM,GAAN,UAAQ,EAAE;IAEV,CAAC;IAED,yBAAU,GAAV,UAAW,EAAE;QACT,IAAG,IAAI,CAAC,SAAS,IAAI,IAAI,EACzB;YACI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;SACvC;aAAI;YAED,EAAE,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;SAC3B;QAED,IAAG,IAAI,CAAC,cAAc,EACtB;YACI,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;YAClC,IAAI,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC;YAC3D,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;SACpD;IAGL,CAAC;IA/CD;QADC,QAAQ;uCACS;IAPD,IAAI;QADxB,OAAO;OACa,IAAI,CAuDxB;IAAD,WAAC;CAvDD,AAuDC,CAvDiC,EAAE,CAAC,SAAS,GAuD7C;kBAvDoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport Attractor from \"./Attractor\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Body extends cc.Component {\r\n    attractor: Attractor = null;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    placeOnSurface: boolean = false;\r\n\r\n    @property\r\n    speed:number = 30;\r\n\r\n    onLoad () {\r\n        \r\n    }\r\n\r\n    start () {\r\n        this.attractor = Attractor.attractor;\r\n        let collider = this.getComponent(cc.Collider3D);\r\n        collider.on('collision-enter', this.onCollisionEnter, this);\r\n        collider.on('collision-exit', this.onCollisionExit, this);\r\n        collider.on('collision-stay', this.onCollisionStay, this);\r\n\r\n    }\r\n    onCollisionStay(event) {\r\n        this.placeOnSurface = true;\r\n    }\r\n   \r\n    onCollisionExit(event) {\r\n        this.placeOnSurface = false;\r\n    }\r\n\r\n    onCollisionEnter(event) {\r\n        this.placeOnSurface = true;        \r\n    }\r\n\r\n    update (dt) {\r\n\r\n    }\r\n\r\n    lateUpdate(dt){\r\n        if(this.attractor != null)\r\n        {\r\n            this.attractor.Attact(this.node,dt);\r\n        }else{\r\n\r\n            cc.log(\"null instance\");\r\n        }\r\n\r\n        if(this.placeOnSurface)\r\n        {\r\n            let position = this.node.position;\r\n            let deltaDistance = this.node.forward.mul(this.speed * dt);\r\n            this.node.position = position.sub(deltaDistance);\r\n        }\r\n        \r\n\r\n    }\r\n}\r\n"]}