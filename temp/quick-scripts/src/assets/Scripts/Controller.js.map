{"version":3,"sources":["assets\\Scripts\\Controller.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,yCAAoC;AAE9B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAwC,8BAAY;IAApD;QAAA,qEAyDC;QAxDG,cAAQ,GAAU,CAAC,CAAC;QAGpB,mBAAa,GAAW,EAAE,CAAC;;IAqD/B,CAAC;IAnDG,wBAAwB;IAExB,2BAAM,GAAN;QACI,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC3E,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAC3E,CAAC;IACD,4BAAO,GAAP,UAAQ,KAAK;QACT,QAAQ,KAAK,CAAC,OAAO,EAAC;YAClB,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YACpB,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACX,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;gBACtB,MAAM;SAEb;IACL,CAAC;IACD,8BAAS,GAAT,UAAU,KAAK;QACX,QAAQ,KAAK,CAAC,OAAO,EAAC;YAClB,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACf,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;gBACZ,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;gBACtB,MAAM;YACV,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACf,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACb,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;gBACvB,MAAM;SAEb;IACL,CAAC;IAED,0BAAK,GAAL;IAEA,CAAC;IAED,2BAAM,GAAN,UAAQ,EAAE;IAGV,CAAC;IAED,+BAAU,GAAV,UAAW,EAAE;QAGL,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,CAAC;QAE1E,IAAI,YAAY,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,EAAE,EAAC,SAAS,CAAC,CAAC,EAAC,SAAS,CAAC,CAAC,EAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QAEpF,IAAI,cAAc,GAAG,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QAE7E,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,mBAAS,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE,EAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,EAAC,cAAc,EAAC,EAAE,GAAC,EAAE,CAAC,CAAC,CAAC;IAGhH,CAAC;IApDD;QADC,QAAQ;qDACkB;IAJV,UAAU;QAD9B,OAAO;OACa,UAAU,CAyD9B;IAAD,iBAAC;CAzDD,AAyDC,CAzDuC,EAAE,CAAC,SAAS,GAyDnD;kBAzDoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport Attractor from \"./Attractor\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Controller extends cc.Component {\r\n    rotation:number = 0;\r\n\r\n    @property\r\n    rotationSpeed: number = 70;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n    onKeyUp(event) {\r\n        switch (event.keyCode){\r\n            case cc.macro.KEY.a:\r\n            case cc.macro.KEY.d:\r\n                    this.rotation = 0;\r\n                break;\r\n\r\n        }\r\n    }\r\n    onKeyDown(event) {\r\n        switch (event.keyCode){\r\n            case cc.macro.KEY.a:\r\n                console.log(\"a\")\r\n                    this.rotation = 1;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                console.log(\"d\");\r\n                    this.rotation = -1;\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) \r\n    {\r\n        \r\n    }\r\n\r\n    lateUpdate(dt)\r\n    {\r\n        \r\n            let yRotation = this.node.up.mul(this.rotation * this.rotationSpeed * dt);\r\n\r\n            let deltaRotaion = cc.Quat.fromEuler(cc.quat(),yRotation.x,yRotation.y,yRotation.z);\r\n\r\n            let targetRotation = deltaRotaion.multiply(this.node.getRotation(cc.quat()));\r\n\r\n            this.node.setRotation(Attractor.slerp(cc.quat(),this.node.getRotation(cc.quat()),targetRotation,50*dt));\r\n       \r\n\r\n    }\r\n}\r\n"]}